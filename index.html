<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
    <title>AudioPlay-url</title>
</head>
<body>
    <p>
        <input type="text" id="audioUrl" placeholder="éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®URL"style="background: linear-gradient(to right, #FFD5EC, #FFD5EC);">
        <button onclick="playAudio();"style="background: 
aliceblue;border: 2px solid gray;border-right-color: black;border-bottom-color: black;">å†ç”Ÿ</button>
        <button onclick="pauseAudio();"style="background: aliceblue;border: 2px solid gray;border-right-color: black;border-bottom-color: black;">åœæ­¢</button>
        <button onclick="playPreviousTrack();"style="background: aliceblue;border: 2px solid gray;border-right-color: black;border-bottom-color: black;">å‰ã®æ›²</button>
        <button onclick="playNextTrack();"style="background: aliceblue;border: 2px solid gray;border-right-color: black;border-bottom-color: black;">æ¬¡ã®æ›²</button>
        <button id="myButton" onclick=changeColor();loopAudio(); style="background: aliceblue;border: 2px solid gray;border-right-color: black;border-bottom-color: black;">ãƒ«ãƒ¼ãƒ—</button>
<!-- ãƒœã‚¿ãƒ³Audioé›† -->
<audio id="btn_audio">
    <source src="https://dl.dropboxusercontent.com/scl/fi/tdinuouc3wxglh90cbkzp/button.mp3?rlkey=8fxww1j72qevx13b9kdaux4e2" type="audio/mp3">
</audio>
<audio id="btn_audio2">
    <source src="https://dl.dropboxusercontent.com/scl/fi/5ndbgsqg1oyy36idfpdjy/button2.mp3?rlkey=h9t3r7nknjc1srok6cfemyo7f" type="audio/mp3">
</audio>
<audio id="btn_audio3">
    <source src="https://dl.dropboxusercontent.com/scl/fi/icy0b93chnq4lvf2tjecl/button3.mp3?rlkey=3a9p93k97p3iow2gvmm7vlb81" type="audio/mp3">
</audio>
<!-- ãƒœã‚¿ãƒ³Audioé›†END -->
<script>
var colors = ["aliceblue", "#FFFF00"]; // äº¤äº’ã«è¡¨ç¤ºã—ãŸã„è‰²ã‚’é…åˆ—ã«è¨­å®š
var currentIndex = 0;

function changeColor() {
    currentIndex = currentIndex < colors.length - 1 ? currentIndex + 1 : 0;
    document.getElementById('myButton').style.background = colors[currentIndex];
}
</script>
        <button onclick="removeCurrentTrack();"style="background: aliceblue;border: 2px solid gray;border-right-color: black;border-bottom-color: black;">å‰Šé™¤</button>
        <button id="myButton2" onclick="fadeAudio();"style="background: aliceblue;border: 2px solid gray;border-right-color: black;border-bottom-color: black;">15minã‚¹ãƒªãƒ¼ãƒ—</button>
        <p id="timer"></p>
<script>
    function fadeAudio() {
document.getElementById('btn_audio').currentTime = 0; //é€£ç¶šã‚¯ãƒªãƒƒã‚¯ã«å¯¾å¿œ
    document.getElementById('btn_audio').play(); //ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰éŸ³ã‚’å†ç”Ÿ
        // æ—¢å­˜ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚¯ãƒªã‚¢
        if (typeof countdown !== 'undefined') {
            clearInterval(countdown);
        }
        if (typeof fadeAudio !== 'undefined') {
            clearInterval(fadeAudio);
        }

        let timeLeft = 900; // 15 minutes in seconds
        const timerElement = document.getElementById("timer");
        timerElement.textContent = `æ®‹ã‚Šæ™‚é–“: ${timeLeft}ç§’`;

        countdown = setInterval(function() {
            timeLeft--;
            timerElement.textContent = `æ®‹ã‚Šæ™‚é–“: ${timeLeft}ç§’`;
            if (timeLeft <= 0) {
                clearInterval(countdown);
            }
        }, 1000);

        setTimeout(function() {
            fadeAudio = setInterval(function () {
                if (audio.volume > 0.1) {
                    audio.volume -= 0.1;
                } else {
                    clearInterval(fadeAudio);
                    audio.pause();
                }
            }, 1500);
        }, 900000);  // 15åˆ†å¾Œã«ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã‚’é–‹å§‹
    }
</script>
<!-- éŸ³é‡ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ -->
        <input type="range" id="volumeSlider" min="0" max="1" step="0.01" onchange="adjustVolume();" value="0.5">
<!-- TEXTã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ -->
    </p>
    <p id="audioTitle"></p>
    <p id="loopStatus"></p>
    <ul id="titleHistory"></ul>

    <script>
        const audio = new Audio();
        const audioUrlInput = document.getElementById("audioUrl");
        const audioTitleDisplay = document.getElementById("audioTitle");
        const loopStatusDisplay = document.getElementById("loopStatus");
        const titleHistoryList = document.getElementById("titleHistory");
        const volumeSlider = document.getElementById("volumeSlider");
        const playlist = [];
        let currentTrackIndex = 0;

        audio.addEventListener('ended', function () {
            if (currentTrackIndex < playlist.length - 1) {
                playNextTrack();
            } else {
                currentTrackIndex = 0;
                audio.src = playlist[currentTrackIndex];
                audio.play();
                const nextTitle = getTitleFromUrl(playlist[currentTrackIndex]);
                audioTitleDisplay.textContent = `Now playing: ${nextTitle}`;
            }
        });

    function playAudio() {
        const modifiedUrl = audioUrlInput.value.replace("https://www.dropbox.com/scl/fi/", "https://dl.dropboxusercontent.com/scl/fi/");
        audio.src = modifiedUrl;
        audio.volume = 0.5;  // å†ç”Ÿæ™‚ã®éŸ³é‡ã‚’0.5ã«è¨­å®š
        volumeSlider.value = 0.5;  // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤ã‚‚0.5ã«æ›´æ–°
        audio.play();
        const title = getTitleFromUrl(modifiedUrl);
        audioTitleDisplay.textContent = `Now playing: ${title}`;
        playlist.push(modifiedUrl);
        currentTrackIndex = playlist.length - 1;
        const titleHistoryItem = document.createElement("li");
        titleHistoryItem.textContent = title;
        titleHistoryList.appendChild(titleHistoryItem);
    document.getElementById('btn_audio').currentTime = 0; //é€£ç¶šã‚¯ãƒªãƒƒã‚¯ã«å¯¾å¿œ
    document.getElementById('btn_audio').play(); //ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰éŸ³ã‚’å†ç”Ÿ
}

        function pauseAudio() {
            audio.pause();
        document.getElementById('btn_audio2').currentTime = 0; //é€£ç¶šã‚¯ãƒªãƒƒã‚¯ã«å¯¾å¿œ
    document.getElementById('btn_audio2').play(); //ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰éŸ³ã‚’å†ç”Ÿ
}

        function loopAudio() {
            audio.loop = !audio.loop;
            loopStatusDisplay.textContent = audio.loop ? "ï¼‘æ›²ãƒ«ãƒ¼ãƒ—å†ç”Ÿä¸­ğŸµ" : "";
        document.getElementById('btn_audio3').currentTime = 0; //é€£ç¶šã‚¯ãƒªãƒƒã‚¯ã«å¯¾å¿œ
    document.getElementById('btn_audio3').play(); //ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰éŸ³ã‚’å†ç”Ÿ
}
//GETtitle,urlã®å¤‰å½¢
        function getTitleFromUrl(url) {
            const cleanUrl = url.split("?rlkey=")[0];
            const parts = cleanUrl.split("/");
            return parts[parts.length - 1];
        }

        function playNextTrack() {
            if (currentTrackIndex < playlist.length - 1) {
                currentTrackIndex++;
                audio.src = playlist[currentTrackIndex];
                audio.play();
                const nextTitle = getTitleFromUrl(playlist[currentTrackIndex]);
                audioTitleDisplay.textContent = `Now playing: ${nextTitle}`;
            document.getElementById('btn_audio').currentTime = 0; //é€£ç¶šã‚¯ãƒªãƒƒã‚¯ã«å¯¾å¿œ
    document.getElementById('btn_audio').play(); //ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰éŸ³ã‚’å†ç”Ÿ
}
        }

        function playPreviousTrack() {
            if (currentTrackIndex > 0) {
                currentTrackIndex--;
                audio.src = playlist[currentTrackIndex];
                audio.play();
                const prevTitle = getTitleFromUrl(playlist[currentTrackIndex]);
                audioTitleDisplay.textContent = `Now playing: ${prevTitle}`;
            document.getElementById('btn_audio').currentTime = 0; //é€£ç¶šã‚¯ãƒªãƒƒã‚¯ã«å¯¾å¿œ
    document.getElementById('btn_audio').play(); //ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰éŸ³ã‚’å†ç”Ÿ
}
        }

        function removeCurrentTrack() {
            if (playlist.length > 0) {
                playlist.splice(currentTrackIndex, 1);
                if (currentTrackIndex >= playlist.length) {
                    currentTrackIndex = playlist.length - 1;
                document.getElementById('btn_audio2').currentTime = 0; //é€£ç¶šã‚¯ãƒªãƒƒã‚¯ã«å¯¾å¿œ
    document.getElementById('btn_audio2').play(); //ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰éŸ³ã‚’å†ç”Ÿ
}
                if (playlist.length > 0) {
                    audio.src = playlist[currentTrackIndex];
                    audio.play();
                    const currentTitle = getTitleFromUrl(playlist[currentTrackIndex]);
                    audioTitleDisplay.textContent = `Now playing: ${currentTitle}`;
                } else {
                    audio.src = "";
                    audioTitleDisplay.textContent = "";
                }
                updateTitleHistory();
            }
        }

        function updateTitleHistory() {
            titleHistoryList.innerHTML = "";
            for (const url of playlist) {
                const title = getTitleFromUrl(url);
                const titleHistoryItem = document.createElement("li");
                titleHistoryItem.textContent = title;
                titleHistoryList.appendChild(titleHistoryItem);
            }
        }

        function adjustVolume() {
            audio.volume = volumeSlider.value;
        }
    </script>
    <details id="Deployment1">
      <summary><b>èª¬æ˜</b></summary>
        <br>ä¸»ã«Dropboxã®å…±æœ‰ç”¨URLã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
        <br>URLã‚’å…¥åŠ›ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã®éŸ³å£°ã‚’å†ç”Ÿã§ãã¾ã™ã€‚
        <br>ãƒ«ãƒ¼ãƒ—ãƒœã‚¿ãƒ³ã§ã‚·ãƒ³ã‚°ãƒ«ãƒ«ãƒ¼ãƒ—ã§ãã¾ã™ã€‚
        <br>æœ€å¾Œã®æ›²ãŒå†ç”Ÿã—çµ‚ã‚ã‚‹ã¨æœ€åˆã®æ›²ã«æˆ»ã‚Šã¾ã™ã€‚
        <br>URLã‚’å†ç”Ÿã™ã‚‹ã”ã¨ã«ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã«æ›²ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚
        <br>éŸ³é‡èª¿ç¯€ã¯ã‚¹ãƒ©ã‚¤ãƒ‰ãƒãƒ¼ã§ã§ãã¾ã™ã€‚<br> 
</details>
    <style>
    #Deployment1 {
        background-color: #7fffd4;
        width: 450px;
    }
</style>
  
  <details id="Deployment2">
    <summary><b>EXURL</b></summary>
      <br>
    <h><font color="#3333FF"><b>URL</b></font>ã‚’ã‚³ãƒ”ãƒšã—ã¦è©¦ã—ã¦ã¿ã‚ˆã†ï¼</h>
 <li>ã€ŒMEGALOVANIAã€<input type="text" id="myInput1" value="https://www.dropbox.com/scl/fi/z2go7xfot0yq0cvilyj71/UNDERTALE-MEGALOVANIA.mp3?rlkey=u1nwkmas8iyi6ujgrgkimigyc&dl=0" readonly onclick="copyToClipboard('myInput1')"style="width: 100px; float: right;color: #3399FF">

<li>ã€Œã‚³ãƒšãƒ«ã‚«ã‚¯ãƒ†ãƒ«ã€<input type="text" id="myInput2" value="https://www.dropbox.com/scl/fi/ue9gv2dw29051u6adxzv7/ã‚³ãƒšãƒ«ã‚«ã‚¯ãƒ†ãƒ«.mp3?rlkey=753njs0ojb95zmnhb0b8i6vkv&dl=0" readonly onclick="copyToClipboard('myInput2')"style="width: 100px; float: right;color: #3399FF">

<li>ã€Œã¾ã¡ã‚ƒãƒ—ãƒªãƒ³ã€<input type="text" id="myInput3" value="https://www.dropbox.com/scl/fi/8isf6upmzg0v54b1i7qe8/ã¾ã¡ã‚ƒãƒ—ãƒªãƒ³.wav?rlkey=1jesgdenhxgh33v18z4c2r3ir&dl=0" readonly onclick="copyToClipboard('myInput3')"style="width: 100px; float: right;color: #3399FF">

<li>ã€Œã‚¹ãƒãƒ¼ãƒãƒ¼ã‚¹ã€<input type="text" id="myInput4" value="https://www.dropbox.com/scl/fi/cpd7gmbcghn8nl33iou9a/ã‚¹ãƒãƒ¼ãƒãƒ¼ã‚¹.mp3?rlkey=wjqqiz672ipv9jfo8eekdtl5u&dl=0" readonly onclick="copyToClipboard('myInput4')"style="width: 100px; float: right;color: #3399FF">

<script>
    function copyToClipboard(id) {
        const inputElement = document.getElementById(id);
        inputElement.select();
        document.execCommand("copy");
    }
</script>
<br><b>â€»ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼ã§ãã¾ã™</b>
</details>
  <style>
    #Deployment2 {
        background-color: #FFCC33;
        width: 450px;
    }
</style>
</body>
</html>
